/* ==========================================================================
   Base radio styles
   ========================================================================== */

.radio {
  @apply flex items-start gap-3 outline-none;

  cursor: var(--cursor-interactive);

  [data-slot="label"] {
    @apply select-none;
  }

  [data-slot="description"] {
    @apply select-none text-wrap;
  }

  /* Disabled state */
  &:disabled,
  &[data-disabled],
  &[aria-disabled] {
    @apply status-disabled;
  }
}

/* ==========================================================================
   Radio control (the circular button)
   ========================================================================== */

.radio__control {
  @apply bg-field shadow-field relative mt-[3px] inline-flex size-4 shrink-0 items-center justify-center rounded-full border outline-none [border-width:var(--border-width-field)];

  /**
   * Transitions
   * CRITICAL: motion-reduce must be AFTER transition for correct override specificity
   */
  transition: all 250ms var(--ease-out);
  @apply motion-reduce:transition-none;

  cursor: var(--cursor-interactive);

  /* Interactive states */
  /* Focus */
  .radio:focus-visible &,
  .radio[data-focus-visible] & {
    @apply status-focused;
  }

  /* Hover */
  .radio:hover &,
  .radio[data-hovered] & {
    @apply border-field-border-hover;
  }

  /* Hover - only when not selected */
  .radio:hover:not([aria-checked]):not([data-selected]) &,
  .radio[data-hovered]:not([aria-checked]):not([data-selected]) & {
    .radio__indicator:empty::before {
      @apply bg-field-hover;
    }
  }

  /* Pressed */
  .radio:active &,
  .radio[data-pressed] & {
    @apply scale-95;
  }

  /* Selection states */
  /* Selected */
  .radio[aria-checked] &,
  .radio[data-selected] & {
    @apply bg-accent border-transparent;
  }

  /* Selected + Pressed */
  .radio:active[data-selected] &,
  .radio[data-pressed][data-selected] & {
    @apply bg-accent-hover;
  }

  /* Validation states */
  /* Invalid */
  .radio[data-invalid] &,
  .radio[aria-invalid] & {
    @apply status-invalid-field;
  }

  /* Invalid + Selected */
  .radio[data-invalid][aria-checked] &,
  .radio[data-invalid][data-selected] &,
  .radio[aria-invalid][aria-checked] &,
  .radio[aria-invalid][data-selected] & {
    @apply status-invalid-field;
  }
}

/* ==========================================================================
   Radio indicator (the inner dot)
   ========================================================================== */

.radio__indicator {
  @apply absolute inset-0 flex items-center justify-center;

  pointer-events: none;
}

/* :empty pseudo-class ensures these styles only apply when the indicator has no custom children
   (e.g., custom icon). When custom content is present, these default dot styles are not applied. */
.radio__indicator:empty::before {
  content: "";
  @apply bg-field rounded-full;

  width: 100%;
  height: 100%;
  scale: 1;

  /**
   * Transitions
   * CRITICAL: motion-reduce must be AFTER transition for correct override specificity
   */
  transition:
    scale 420ms var(--ease-smooth),
    background-color 400ms var(--ease-smooth);
  @apply motion-reduce:transition-none;
}

/* Selected state */
.radio[aria-checked] .radio__indicator:empty::before,
.radio[data-selected] .radio__indicator:empty::before {
  @apply bg-accent-foreground;
  scale: 0.4286; /* 6px */
}

/* Selected + Pressed state */
.radio[data-selected][data-pressed] .radio__indicator:empty::before {
  scale: 0.5714; /* 8px */
}

/* ==========================================================================
   Radio content wrapper
   ========================================================================== */

.radio__content {
  @apply flex flex-col gap-0;
}

/* ==========================================================================
   Disabled modifier
   ========================================================================== */

.radio--disabled {
  @apply status-disabled;
}
