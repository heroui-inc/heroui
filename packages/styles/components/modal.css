/* Modal Component Styles */

/* trigger */
.modal__trigger {
  @apply cursor-pointer;

  &:focus-visible,
  &[data-focus-visible="true"] {
    @apply outline-focus outline-2 outline-offset-2;
  }

  &:disabled,
  &[aria-disabled="true"] {
    @apply pointer-events-none cursor-not-allowed opacity-[var(--disabled-opacity)];
  }
}

/* overlay */
.modal__overlay {
  @apply fixed inset-0 z-50 h-[var(--visual-viewport-height)] will-change-auto;

  &[data-entering] {
    @apply animate-in fade-in-0 ease-out-quad duration-200;
  }

  &[data-exiting] {
    @apply animate-out fade-out ease-out-quart duration-200;
  }
}

/* overlay variants */
.modal__overlay--transparent {
  @apply bg-transparent;
}

.modal__overlay--solid {
  @apply bg-black/50;
}

.modal__overlay--blur {
  @apply bg-black/50 backdrop-blur-md;
}

/* container */
.modal__container {
  @apply fixed left-1/2 top-[calc(var(--visual-viewport-height)/2)] isolate z-50 flex max-h-[var(--visual-viewport-height)] w-full -translate-x-1/2 -translate-y-1/2 will-change-auto;

  &[data-placement="auto"] {
    /* Mobile: Position near bottom using translate (not bottom-0), with overflow handling */
    @apply top-[calc(var(--visual-viewport-height)-2rem)] max-h-[calc(var(--visual-viewport-height)-2rem)] -translate-y-full items-end justify-center overflow-y-auto p-2;
    /* Desktop: Vertically centered with standard padding */
    @apply sm:top-[calc(var(--visual-viewport-height)/2)] sm:max-h-[var(--visual-viewport-height)] sm:-translate-y-1/2 sm:items-center sm:justify-center sm:p-4;
  }

  &[data-placement="center"] {
    @apply items-center justify-center overflow-y-auto p-2 sm:p-4;
  }

  &[data-placement="top"] {
    @apply top-8 max-h-[calc(var(--visual-viewport-height)-4rem)] translate-y-0 items-start justify-center overflow-y-auto px-2 pb-2 pt-8 sm:px-4 sm:pb-4 sm:pt-4;
  }

  &[data-placement="bottom"] {
    @apply top-[calc(var(--visual-viewport-height)-2rem)] max-h-[calc(var(--visual-viewport-height)-4rem)] -translate-y-full items-end justify-center overflow-y-auto px-2 pb-8 pt-2 sm:px-4 sm:pb-4 sm:pt-4;
  }

  &[data-entering] {
    &[data-placement="auto"] {
      @apply animate-in slide-in-from-bottom-20 fade-in-0 ease-out-quad duration-200;

      @media (min-width: 640px) {
        @apply zoom-in-95 slide-in-from-bottom-4 ease-out-quad duration-200;
      }
    }

    &[data-placement="center"] {
      @apply animate-in zoom-in-95 slide-in-from-top-1 fade-in-0 ease-out-quad duration-200;
    }

    &[data-placement="top"] {
      @apply animate-in zoom-in-95 slide-in-from-top-4 fade-in-0 ease-out-quad duration-200;
    }

    &[data-placement="bottom"] {
      @apply animate-in zoom-in-95 slide-in-from-bottom-4 fade-in-0 ease-out-quad duration-200;
    }
  }

  &[data-exiting] {
    &[data-placement="auto"] {
      @apply animate-out slide-out-to-bottom-20 fade-out ease-out-quart duration-150;

      @media (min-width: 640px) {
        @apply zoom-out-95 slide-out-to-bottom-4 ease-out-quart duration-150;
      }
    }

    &[data-placement="center"] {
      @apply animate-out zoom-out-95 slide-out-to-top-1 fade-out ease-out-quart duration-150;
    }

    &[data-placement="top"] {
      @apply animate-out zoom-out-95 slide-out-to-top-4 fade-out ease-out-quart duration-150;
    }

    &[data-placement="bottom"] {
      @apply animate-out zoom-out-95 slide-out-to-bottom-4 fade-out ease-out-quart duration-150;
    }
  }
}

/* container variants - scroll outside  */
.modal__container--scroll-outside {
  @apply !h-full !max-h-[var(--visual-viewport-height)] !items-start justify-center overflow-y-auto p-0;
}

/* dialog */
.modal__dialog {
  @apply rounded-panel-inner bg-panel relative flex w-full max-w-md flex-col shadow-lg;

  &:focus-visible,
  &[data-focus-visible="true"] {
    @apply outline-focus outline-2 outline-offset-2;
  }

  &[data-placement="auto"] {
    /* Keep all rounded corners on mobile and desktop */
    @apply rounded-panel-inner;
  }
}

/* dialog variants - scroll inside  */
.modal__dialog--scroll-inside {
  @apply max-h-[calc(var(--visual-viewport-height)-8rem)] overflow-y-hidden;
}

/* dialog variants - scroll outside  */
.modal__dialog--scroll-outside {
  @apply mx-1 my-16 sm:mx-6;
}

/* header */
.modal__header {
  @apply flex flex-col gap-2 px-6 pt-6;
}

/* body */
.modal__body {
  @apply text-foreground flex-1 px-6 py-5 text-sm leading-6;
}

/* body variants - scroll inside  */
.modal__body--scroll-inside {
  @apply overflow-y-auto;
  -webkit-overflow-scrolling: touch;
}

/* body variants - scroll outside  */
.modal__body--scroll-outside {
  @apply overflow-y-visible;
}

/* footer */
.modal__footer {
  @apply flex flex-row items-center justify-end gap-2 px-6 pb-6;
}

/* close trigger */
.modal__close-trigger {
  @apply absolute right-4 top-4 inline-flex h-8 min-w-8 items-center justify-center rounded-md px-2;
  @apply text-muted cursor-pointer bg-transparent;

  transition:
    transform 150ms var(--ease-smooth),
    background-color 150ms var(--ease-smooth);

  &:hover,
  &[data-hover="true"] {
    @apply bg-accent-soft text-accent-soft-foreground;
  }

  &:active,
  &[data-pressed="true"] {
    @apply bg-accent-soft scale-95;
  }

  &:focus-visible,
  &[data-focus-visible="true"] {
    @apply outline-focus outline-2 outline-offset-2;
  }

  &:disabled,
  &[aria-disabled="true"] {
    @apply pointer-events-none cursor-not-allowed opacity-[var(--disabled-opacity)];
  }

  & svg {
    @apply size-4;
  }
}
