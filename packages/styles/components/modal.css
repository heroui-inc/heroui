/* Modal component styles */

/* Trigger */
.modal__trigger {
  cursor: var(--cursor-interactive);

  &:focus-visible,
  &[data-focus-visible="true"] {
    outline: 2px solid var(--focus);
    outline-offset: 2px;
  }

  &:disabled,
  &[aria-disabled="true"] {
    @apply pointer-events-none opacity-[var(--disabled-opacity)];
    cursor: var(--cursor-disabled);
  }
}

/* Overlay */
.modal__overlay {
  @apply fixed inset-0 z-50 will-change-[backdrop-filter];

  /* Entering animation */
  &[data-entering] {
    @apply animate-in fade-in-0 ease-out-quad duration-200;
  }

  /* Exiting animation */
  &[data-exiting] {
    @apply animate-out fade-out ease-out-quart duration-150;
  }
}

/* Overlay variants */
.modal__overlay--opaque {
  @apply bg-black/50;
}

.modal__overlay--blur {
  @apply bg-black/20 backdrop-blur-md;
}

.modal__overlay--transparent {
  @apply bg-transparent;
}

/* Content - positioning container */
.modal__content {
  @apply fixed inset-0 z-50 flex overflow-y-auto p-4;

  /* Entering animation */
  &[data-entering] {
    @apply animate-in ease-out-quad duration-200;
  }

  /* Exiting animation */
  &[data-exiting] {
    @apply animate-out ease-out-quart duration-150;
  }
}

/* Content placement variants */
.modal__content--auto {
  /* Mobile: bottom sheet */
  @apply items-end justify-center;

  /* Desktop: centered */
  @apply sm:items-center sm:justify-center;

  /* Mobile animations: slide from bottom */
  &[data-entering] {
    @apply animate-in slide-in-from-bottom-20 duration-300;
    animation-timing-function: cubic-bezier(0.32, 0.72, 0, 1);
  }

  &[data-exiting] {
    @apply animate-out slide-out-to-bottom-20 duration-300;
    animation-timing-function: cubic-bezier(0.32, 0.72, 0, 1);
  }

  /* Desktop animations: zoom + slight slide */
  @media (min-width: 640px) {
    &[data-entering] {
      @apply zoom-in-95 slide-in-from-bottom-4 duration-200;
      animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }

    &[data-exiting] {
      @apply zoom-out-95 slide-out-to-bottom-4 duration-200;
      animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }
  }
}

.modal__content--center {
  @apply items-center justify-center;

  &[data-entering] {
    @apply zoom-in-95 slide-in-from-top-1;
  }

  &[data-exiting] {
    @apply zoom-out-95;
  }
}

.modal__content--top {
  @apply items-start justify-center pt-12;

  &[data-entering] {
    @apply zoom-in-95 slide-in-from-top-4;
  }

  &[data-exiting] {
    @apply zoom-out-95 slide-out-to-top-4;
  }
}

.modal__content--bottom {
  @apply items-end justify-center pb-12;

  &[data-entering] {
    @apply zoom-in-95 slide-in-from-bottom-4;
  }

  &[data-exiting] {
    @apply zoom-out-95 slide-out-to-bottom-4;
  }
}

/* Dialog - main modal container */
.modal__dialog {
  @apply rounded-panel-inner bg-panel relative z-50 flex w-full max-w-md flex-col gap-5 p-6 shadow-lg will-change-transform;

  /* Focus state */
  &:focus-visible,
  &[data-focus-visible="true"] {
    outline: 2px solid var(--focus);
    outline-offset: 2px;
  }
}

/* Dialog size variants */
.modal__dialog--sm {
  @apply max-w-sm;
}

/* No styles for --md as this is the default size */

.modal__dialog--lg {
  @apply max-w-lg;
}

.modal__dialog--xl {
  @apply max-w-xl;
}

.modal__dialog--full {
  @apply max-w-full;
}

/* Dialog placement variant */
.modal__dialog--auto {
  /* Mobile: rounded top corners only */
  @apply rounded-b-none rounded-t-3xl;

  /* Desktop: all corners rounded */
  @apply sm:rounded-panel-inner;
}

/* Header */
.modal__header {
  @apply flex flex-col gap-2;
}

/* Header alignment variant */
.modal__header--center {
  @apply items-center text-center;
}

/* Icon */
.modal__icon {
  @apply bg-accent-soft text-accent-soft-foreground flex size-10 items-center justify-center rounded-full;
}

/* Title */
.modal__title {
  @apply text-foreground text-lg font-semibold leading-6;
}

/* Description */
.modal__description {
  @apply text-muted text-sm leading-5;
}

/* Body */
.modal__body {
  @apply text-foreground flex-1 text-sm leading-6;
  /* overflow controlled by scrollBehavior variant */
}

/* Footer */
.modal__footer {
  @apply flex flex-row items-center justify-end gap-2;
}

/* Footer layout variant */
.modal__footer--vertical {
  @apply flex-col-reverse;

  /* Full width buttons in vertical layout */
  & > * {
    @apply w-full;
  }
}

/* Close trigger */
.modal__close-trigger {
  @apply absolute right-4 top-4 inline-flex size-8 items-center justify-center rounded-md p-0;
  @apply text-muted bg-transparent;

  transition:
    transform 150ms var(--ease-smooth),
    background-color 150ms var(--ease-smooth);
  cursor: var(--cursor-interactive);

  /* Hover state */
  &:hover,
  &[data-hover="true"] {
    @apply bg-accent-soft text-accent-soft-foreground;
  }

  /* Active state */
  &:active,
  &[data-pressed="true"] {
    @apply bg-accent-soft;
    transform: scale(0.95);
  }

  /* Focus state */
  &:focus-visible,
  &[data-focus-visible="true"] {
    outline: 2px solid var(--focus);
    outline-offset: 2px;
  }

  /* Disabled state */
  &:disabled,
  &[aria-disabled="true"] {
    @apply pointer-events-none opacity-[var(--disabled-opacity)];
    cursor: var(--cursor-disabled);
  }

  /* Icon sizing */
  & svg {
    @apply size-4;
  }
}

/* ScrollBehavior variants */

/* Content scroll variant */
.modal__content--scroll-outside {
  @apply items-start sm:items-start;
}

/* Dialog scroll variants */
.modal__dialog--scroll-normal {
  @apply overflow-y-hidden;
}

.modal__dialog--scroll-inside {
  @apply max-h-[calc(100vh-8rem)] overflow-y-hidden;
}

.modal__dialog--scroll-outside {
  @apply my-16;
}

/* Body scroll variants */
.modal__body--scroll-normal {
  @apply overflow-y-visible;
}

.modal__body--scroll-inside {
  @apply overflow-y-auto;
  -webkit-overflow-scrolling: touch;
}

.modal__body--scroll-outside {
  @apply overflow-y-visible;
}
