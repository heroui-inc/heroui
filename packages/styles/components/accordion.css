/* Base accordion styles */
.accordion {
  @apply w-full;

  /* Performance optimization - contain layout changes */
  contain: layout style;
}

/* Accordion elements */
.accordion__body {
  /* Body is now just a wrapper for the grid animation */
}

.accordion__body-inner {
  @apply text-muted px-4 pb-4 pt-0;
}

.accordion__heading {
  @apply flex;
}

.accordion__indicator {
  @apply text-muted ml-auto size-4 shrink-0 transition duration-300;

  /* Expanded state for indicator rotation */
  &[data-expanded="true"] {
    @apply -rotate-180;
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

.accordion__item {
  @apply border-b last:border-b-0;
}

.accordion__trigger {
  cursor: var(--cursor-interactive);

  /* Base Styles */
  @apply flex flex-1 items-center justify-between px-4 py-4 text-left font-medium;

  transition:
    background-color 150ms var(--ease-smooth),
    opacity 150ms var(--ease-smooth),
    box-shadow 150ms var(--ease-out);

  /* Hover state */
  &:hover,
  &[data-hover="true"],
  /* Pressed state */
  &[data-pressed="true"] {
    background-color: color-mix(in oklab, var(--color-foreground) 6%, transparent 90%);
  }

  /* Focus state */
  &:focus-visible,
  &[data-focus-visible="true"] {
    @apply status-focused;
  }

  /* Disabled State */
  &:disabled,
  &[aria-disabled="true"] {
    @apply status-disabled;
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

.accordion__panel {
  opacity: 0;
  will-change: height, opacity;
  transition:
    height 500ms var(--ease-fluid-out),
    opacity 340ms var(--ease-out);
  height: var(--disclosure-panel-height);
  overflow: clip;

  &[data-expanded="true"] {
    opacity: 1;
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

/* Outline variant */
.accordion--outline {
  @apply bg-panel rounded-xl border shadow-sm;

  .accordion__trigger {
    &:hover,
    &[data-hover="true"] {
      @apply bg-panel-hover;
    }
  }
}

.accordion--outline .accordion__item {
  /* Special rounding for first and last items in outline variant */
  &:first-child [data-slot="accordion-trigger"] {
    @apply rounded-t-lg;
  }

  &:last-child:not(:has([data-slot="accordion-trigger"][aria-expanded="true"]))
    [data-slot="accordion-trigger"] {
    @apply rounded-b-lg;
  }
}
