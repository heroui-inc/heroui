/* Base accordion styles */
.accordion {
  @apply w-full;

  /* Performance optimization - contain layout changes */
  contain: layout style;
}

/* Accordion elements */
.accordion__body {
}

.accordion__body-inner {
  @apply text-muted px-4 pb-4 pt-0;
}

.accordion__heading {
  @apply flex;
}

.accordion__indicator {
  @apply text-muted ml-auto size-4 shrink-0 transition duration-300;

  /* Expanded state for indicator rotation */
  &[data-expanded="true"] {
    @apply -rotate-180;
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

/* Accordion Item - Separator styles */
.accordion__item {
  @apply relative border-none;
}

.accordion__item::after {
  content: "";
  @apply bg-divider absolute bottom-0 left-[3%] h-px w-[94%] rounded-full;
}

.accordion__item:last-child::after {
  content: none;
}
/* ------------------------------------ */

.accordion__trigger {
  cursor: var(--cursor-interactive);

  /* Base Styles */
  @apply flex flex-1 items-center justify-between px-4 py-4 text-left font-medium;

  transition:
    background-color 150ms var(--ease-out),
    opacity 150ms var(--ease-smooth),
    box-shadow 150ms var(--ease-out);

  /* Hover state */
  &:hover:not([aria-expanded="true"]),
  &[data-hovered="true"]:not([aria-expanded="true"]),
  /* Pressed state */
  &[data-pressed="true"]:not([aria-expanded="true"]) {
    background-color: color-mix(in oklab, var(--color-foreground) 6%, transparent 90%);
  }

  /* Focus state */
  &:focus-visible,
  &[data-focus-visible="true"] {
    @apply status-focused;
  }

  /* Disabled State */
  &:disabled,
  &[aria-disabled="true"] {
    @apply status-disabled;
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

.accordion__panel {
  opacity: 0;
  will-change: height, opacity;
  transition:
    height 420ms var(--ease-fluid-out),
    opacity 340ms var(--ease-out);
  height: var(--disclosure-panel-height);
  overflow: clip;

  &[data-expanded="true"] {
    opacity: 1;
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

/* Panel variant */
.accordion--panel {
  @apply bg-panel rounded-3xl;

  .accordion__trigger {
    &:hover:not([aria-expanded="true"]),
    &[data-hovered="true"]:not([aria-expanded="true"]) {
      @apply bg-default;
    }
  }
}

.accordion--panel .accordion__item {
  /* Special rounding for first and last items in panel variant */
  &:first-child [data-slot="accordion-trigger"] {
    @apply rounded-t-3xl;
  }

  &:last-child:not(:has([data-slot="accordion-trigger"][aria-expanded="true"]))
    [data-slot="accordion-trigger"] {
    @apply rounded-b-3xl;
  }
}
